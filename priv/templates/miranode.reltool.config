%% Generated by codegen_tool
{sys, [
       {lib_dirs, ["../deps", "../apps"]},

       {erts, [{mod_cond, derived}, {app_file, strip}]},
       {app_file, strip},

       {rel, "{{ nodeid }}", "#APPLICATION_VERSION#",
        [
         {{ nodeid }}
        ]},
       {rel, "start_clean", "",
        [
         kernel,
         stdlib
        ]},
       {boot_rel, "{{ nodeid }}"},
       {profile, embedded},
       {incl_cond, exclude},
       {excl_archive_filters, [".*"]}, %% Do not archive built libs - breaks platform_tools (specifically pt_util_sha2.so)
       {excl_sys_filters, ["^bin/.*",
                           "^erts.*/bin/(dialyzer|typer)"]},


       {app, sasl,   [{incl_cond, include}]},
       {app, stdlib, [{incl_cond, include}]},
       {app, kernel, [{incl_cond, include}]},
       {app, mnesia, [{incl_cond, include}]},
       {app, crypto, [{incl_cond, include}]},
       {app, odbc, [{incl_cond, include}]},
       {app, public_key, [{incl_cond, include}]},
       {app, ssl, [{incl_cond, include}]},
       {app, inets, [{incl_cond, include}]},
       {app, xmerl, [{incl_cond, include}]},
       {app, syntax_tools, [{incl_cond, include}]},
       {app, compiler, [{incl_cond, include}]},
       {app, asn1, [{incl_cond, include}]},
       {app, mochiweb, [{incl_cond, include}]},
       {% if use_webmachine %}
       {app, webmachine, [{incl_cond, include}]},
       {% endif %}
       {app, mira_evmc, [{incl_cond, include}]},
       {app, mira_platform_tools, [{incl_cond, include}]},
       {app, mira_uuid_server, [{incl_cond, include}]},
       {app, mira_eroq, [{incl_cond, include}]},
       {app, mira_snmp_mibs, [{incl_cond, include}]},
       {app, mira_snmp_api_tools, [{incl_cond, include}]},
       {app, mira_snmp_api_client_app, [{incl_cond, include}]},
       {app, mira_cfg_client_api, [{incl_cond, include}]},
       {app, mira_cfg_generic_object, [{incl_cond, include}]},
       {app, {{ nodeid }}, [{incl_cond, include}]}
      ]}.

{target_dir, "{{ nodeid }}"}.

{overlay, [
           {mkdir, "log"},
           {mkdir, "log/sasl"},
           {mkdir, "os_scripts"},
           {mkdir, "monitoring"},
           {mkdir, "reports"},

           {mkdir, "priv/ssl"},
           {copy, "files/ssl/*", "priv/ssl/."},

           {copy, "files/os_scripts/*",         "os_scripts/."},
           {copy, "files/monitoring/*",         "monitoring/."},
           {copy, "files/reports/*",            "reports/."},
           {copy, "files/erl",                  "\{\{erts_vsn\}\}/bin/erl"},
           {copy, "files/nodetool",             "\{\{erts_vsn\}\}/bin/nodetool"},
           {copy, "files/{{nodeid}}",           "bin/{{nodeid}}"},
           {copy, "files/{{nodeid}}.cmd",       "bin/{{nodeid}}.cmd"},
           {copy, "files/start_erl.cmd",        "bin/start_erl.cmd"},
           
           {mkdir,    "etc"},
           {template, "schemas/00-{{nodeid}}.schema",   "lib/00-{{nodeid}}.schema"},
           {template, "schemas/99-erlang_vm.schema",    "lib/99-erlang_vm.schema"},
           {copy,     "../deps/cuttlefish/cuttlefish",  "\{\{erts_vsn\}\}/bin/cuttlefish"}

          ]}.
